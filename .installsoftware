#!/bin/bash

source ~/.functions

install-jdk(){

  JDK_VERSION=$1

  echo "JDK_VERSION : $JDK_VERSION"

  case $JDK_VERSION in

    20)
      # https://github.com/adoptium/temurin20-binaries
      ADOPTIUM_TOP_VERSION=20
      ADOPTIUM_TAG_VERSION=$VERSION_JAVA_20_ADOPTIUM_TAG
      ADOPTIUM_FOLDER=$VERSION_JAVA_20
      ADOPTIUM_ARCHIVE_NAME=$VERSION_JAVA_20_ADOPTIUM_ARCHIVE_NAME
    ;;


    19)
      # https://github.com/adoptium/temurin19-binaries
      ADOPTIUM_TOP_VERSION=19
      ADOPTIUM_TAG_VERSION=$VERSION_JAVA_19_ADOPTIUM_TAG
      ADOPTIUM_FOLDER=$VERSION_JAVA_19
      ADOPTIUM_ARCHIVE_NAME=$VERSION_JAVA_19_ADOPTIUM_ARCHIVE_NAME
    ;;

    18)
      # https://github.com/adoptium/temurin18-binaries
      ADOPTIUM_TOP_VERSION=18
      ADOPTIUM_TAG_VERSION=$VERSION_JAVA_18_ADOPTIUM_TAG
      ADOPTIUM_FOLDER=$VERSION_JAVA_18
      ADOPTIUM_ARCHIVE_NAME=$VERSION_JAVA_18_ADOPTIUM_ARCHIVE_NAME
    ;;

    17)
      # https://github.com/adoptium/temurin17-binaries
      ADOPTIUM_TOP_VERSION=17
      ADOPTIUM_TAG_VERSION=$VERSION_JAVA_17_ADOPTIUM_TAG
      ADOPTIUM_FOLDER=$VERSION_JAVA_17
      ADOPTIUM_ARCHIVE_NAME=$VERSION_JAVA_17_ADOPTIUM_ARCHIVE_NAME
    ;;

    11)
      # https://github.com/adoptium/temurin11-binaries
      ADOPTIUM_TOP_VERSION=11
      ADOPTIUM_TAG_VERSION=$VERSION_JAVA_11_ADOPTIUM_TAG
      ADOPTIUM_FOLDER=$VERSION_JAVA_11
      ADOPTIUM_ARCHIVE_NAME=$VERSION_JAVA_11_ADOPTIUM_ARCHIVE_NAME
    ;;

    8)
      # https://github.com/adoptium/temurin8-binaries
      ADOPTIUM_TOP_VERSION=8
      ADOPTIUM_TAG_VERSION=$VERSION_JAVA_8_ADOPTIUM_TAG
      ADOPTIUM_FOLDER=$VERSION_JAVA_8
      ADOPTIUM_ARCHIVE_NAME=$VERSION_JAVA_8_ADOPTIUM_ARCHIVE_NAME
    ;;

    *)
      ADOPTIUM_TOP_VERSION=17
      ADOPTIUM_TAG_VERSION=$VERSION_JAVA_17_ADOPTIUM_TAG
      ADOPTIUM_FOLDER=$VERSION_JAVA_17
      ADOPTIUM_ARCHIVE_NAME=$VERSION_JAVA_17_ADOPTIUM_ARCHIVE_NAME
    ;;
  esac

  JAVA_INSTALL_DIR="/opt/java"
  JDK_BASE_URL="https://github.com/adoptium/temurin"$ADOPTIUM_TOP_VERSION"-binaries/releases/download/$ADOPTIUM_TAG_VERSION/$ADOPTIUM_ARCHIVE_NAME"

  JDK_ARCHIVE_PATH="$SOFTWARE_FOLDER/$ADOPTIUM_ARCHIVE_NAME"

  echo "ADOPTIUM_ARCHIVE_NAME : $ADOPTIUM_ARCHIVE_NAME"
  echo "JDK_ARCHIVE_PATH : $JDK_ARCHIVE_PATH"

  if [ ! -f "$JDK_ARCHIVE_PATH" ]; then
    wget -P $SOFTWARE_FOLDER $JDK_BASE_URL
  fi

  if [ ! -d "$JAVA_INSTALL_DIR" ]; then
    sudo mkdir -p $JAVA_INSTALL_DIR
    sudo chown $LOGNAME:$LOGNAME -R $JAVA_INSTALL_DIR
    echo "Folder $JAVA_INSTALL_DIR was created"
  else
    echo "Folder $JAVA_INSTALL_DIR already existed"
  fi

  if [ ! -d "$JAVA_INSTALL_DIR/$ADOPTIUM_FOLDER" ]; then
    tar -xzf $JDK_ARCHIVE_PATH -C $JAVA_INSTALL_DIR
  else
    echo "$ADOPTIUM_FOLDER is already installed"
  fi

  echo "Java install in the folder $ADOPTIUM_FOLDER"

}

install-jdk8(){
  echo "Starting to install jdk 8"
  install-jdk 8
}

install-jdk11(){
  echo "Starting to install jdk 11"
  install-jdk 11
}

install-jdk17(){
  echo "Starting to install jdk 17"
  install-jdk 17
}

install-jdk18(){
  echo "Starting to install jdk 18"
  install-jdk 18
}

install-jdk19(){
  echo "Starting to install jdk 19"
  install-jdk 19
}

install-jdk20(){
  echo "Starting to install jdk 20"
  install-jdk 20
}

