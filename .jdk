#!/bin/bash

jdk8(){
	export JAVA_HOME=$JAVA_8_HOME
	updateJdkAlternatives
	echo
	echo "☕ Switching to Java 8 -> JAVA_HOME : $JAVA_HOME"
}

jdk11(){
	export JAVA_HOME=$JAVA_11_HOME
	updateJdkAlternatives
	echo "== Switching to Java 11 -> JAVA_HOME : $JAVA_HOME"
}

jdk17(){
	export JAVA_HOME=$JAVA_17_HOME
	updateJdkAlternatives
	echo
	echo "☕ Switching to Java 17 -> JAVA_HOME : $JAVA_HOME"
}

jdk18(){
	export JAVA_HOME=$JAVA_18_HOME
	updateJdkAlternatives
	echo
	echo "☕ Switching to Java 18 -> JAVA_HOME : $JAVA_HOME"
}

jdk19(){
	export JAVA_HOME=$JAVA_19_HOME
	updateJdkAlternatives
	echo
	echo "☕ Switching to Java 19 -> JAVA_HOME : $JAVA_HOME"
}

jdk20(){
	export JAVA_HOME=$JAVA_20_HOME
	updateJdkAlternatives
	echo
	echo "☕ Switching to Java 20 -> JAVA_HOME : $JAVA_HOME"
}

jdkNext(){
	export JAVA_HOME=$JAVA_NEXT_HOME
	updateJdkAlternatives
	echo
	echo "☕ Switching to Java Next -> JAVA_HOME : $JAVA_HOME"
}

jdkGetReadyToBuild(){
	sudo dnf install freetype-devel \
		cups-devel \
		libXtst-devel \
		libXt-devel \
		libXrender-devel \
		libXrandr-devel \
		libXi-devel \
		alsa-lib-devel \
		libffi-devel \
		autoconf \
		gcc-c++ \
		fontconfig-devel -y

	OPENJDK_JDK=$HOME/git/openjdk/jdk

	if [ -d $OPENJDK_JDK ]; then
		echo "We have the folder $OPENJDK_JDK"
		cd $OPENJDK_JDK
		git pull
	else
		echo "We do not have the folder $OPENJDK_JDK"
		mkdir -p $OPENJDK_JDK
		git clone https://github.com/openjdk/jdk.git $OPENJDK_JDK
		cd $OPENJDK_JDK
		git config pull.rebase false
	fi

	bash configure  --with-version-date=$(date +"%Y-%m-%d") --with-vendor-name=JarryDk

	echo ""
	echo "make clean images"
}

updateJdkAlternatives() {

    ALTERNATIVES_NAME=alternatives
    if [ -f /etc/redhat-release ]; then
        ALTERNATIVES_NAME=alternatives
    fi
    if [ -f /etc/lsb-release ]; then
	    ALTERNATIVES_NAME=update-alternatives
    fi

	printf "\e[32m✔ JAVA_HOME -> $JAVA_HOME\033\e[0m$@\n"

    sudo $ALTERNATIVES_NAME --install "/usr/bin/java" java "$JAVA_HOME/bin/java" 1
	sudo $ALTERNATIVES_NAME --set java "$JAVA_HOME/bin/java"

	if [ -f "$JAVA_HOME/bin/javac" ]; then
		sudo $ALTERNATIVES_NAME --install "/usr/bin/javac" javac "$JAVA_HOME/bin/javac" 1 2> /dev/null
		sudo $ALTERNATIVES_NAME --set javac "$JAVA_HOME/bin/javac"
		printf "\e[32m✔ /usr/bin/javac -> $JAVA_HOME/bin/javac\033\e[0m$@\n"
	else
		printf "\e[33m✋ $JAVA_HOME/bin/javac was not found\033\e[0m$@\n"
	fi

	if [ -f "$JAVA_HOME/bin/javadoc" ]; then
		sudo $ALTERNATIVES_NAME --install "/usr/bin/javadoc" javadoc "$JAVA_HOME/bin/javadoc" 1 2> /dev/null
		sudo $ALTERNATIVES_NAME --set javadoc "$JAVA_HOME/bin/javadoc"
		printf "\e[32m✔ /usr/bin/javadoc -> $JAVA_HOME/bin/javadoc\033\e[0m$@\n"
	else
		printf "\e[33m✋ $JAVA_HOME/bin/javadoc was not found\033\e[0m$@\n"
	fi

	if [ -f "$JAVA_HOME/bin/keytool" ]; then
		sudo $ALTERNATIVES_NAME --install "/usr/bin/keytool" keytool "$JAVA_HOME/bin/keytool" 1 2> /dev/null
		sudo $ALTERNATIVES_NAME --set keytool "$JAVA_HOME/bin/keytool"
		printf "\e[32m✔ /usr/bin/keytool -> $JAVA_HOME/bin/keytool\033\e[0m$@\n"
	else
		printf "\e[33m✋ $JAVA_HOME/bin/keytool was not found\033\e[0m$@\n"
	fi

}
